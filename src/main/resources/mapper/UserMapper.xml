<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="priv.zsk.springbootdemo.mapper.UserMapper">
	<!-- 查询所有的用户信息 -->
	<select id="findUserList" parameterType="priv.zsk.springbootdemo.entity.User" resultType="priv.zsk.springbootdemo.entity.User">
		SELECT tu.* FROM admin_user tu
		WHERE deleted = 1
		<if test="account != '' and account != null">
			and tu.account = #{account}
		</if>
	</select>

	<!--通过用户账号查询用户信息 -->
	<select id="findUserByAccount" resultType="priv.zsk.springbootdemo.entity.User">
		SELECT tu.* FROM admin_user tu WHERE tu.account = #{value}
	</select>

	<!--通过用户账号查询用户id -->
	<select id="findUserIdByAccount" resultType="INTEGER">
		SELECT tu.id FROM admin_user tu WHERE tu.account = #{value}
	</select>

	<!--更新用户-->
	<update id="updateUser" parameterType="priv.zsk.springbootdemo.entity.User">
		UPDATE admin_user set
				account = #{account},
				userName = #{userName}
		WHERE id = #{id}
	</update>

	<!--删除用户（逻辑删除）-->
	<update id="deleteUser" parameterType="priv.zsk.springbootdemo.entity.User">
			UPDATE admin_user set
				`deleted` = 0
		WHERE id = #{id}
	</update>

	<!--添加用户-->
	<insert id="addUser" parameterType="priv.zsk.springbootdemo.entity.User">
		INSERT INTO `pets`.`admin_user` (`account`, `user_name`, `user_password`, `sex`, `age`,`mobile`, `address`, `remark`, `salt`, `create_time`, `deleted`)
		VALUES (#{account},#{userName},#{userPassword},#{sex},#{age},#{mobile}, #{address},#{remark},#{salt},#{createTime},#{deleted});
	</insert>

</mapper>